function input(){const e=document.getElementById("timeline_box"),t=document.getElementById("text_box"),n=document.getElementById("names_box"),s=document.getElementById("delay_box"),u=document.getElementById("shift_box"),o=document.getElementById("start_box"),l=document.getElementById("output_box");if(Sub.output=[],sCache.save("timeline_box",e.value),sCache.save("text_box",t.value),sCache.save("names_box",n.value),sCache.save("delay_box",s.value),sCache.save("shift_box",u.value),sCache.save("start_box",o.value),""!=e.value&&(Sub.timeline=e.value.split("\n")),""!=t.value&&(Sub.text=t.value.split("\n")),document.getElementById("names_cb").checked?""!=n.value&&(Sub.names=n.value.split("\n")):Sub.names[0]="",Sub.delay=+s.value,Sub.shift=+u.value,Sub.startsFrom=+o.value,logInput(),(new messages).clear(),errors(),countRows(),Sub.timeline=toMiliSec(Sub.timeline),charsec(Sub.timeline,Sub.text),document.getElementById("unite_cb").checked){let e=document.getElementById("unite_length"),t=document.getElementById("unite_time");sCache.save("unite_length",e.value),sCache.save("unite_time",t.value),combine(e.value,t.value)}srt_cb.checked?convert("srt"):ass_cb.checked?convert("ass"):messages("choose a format to convert to (srt/ass)","e"),l.value=Sub.output.join("\n"),autodown_cb.checked&&(srt_cb.checked||ass_cb.checked)&&(srt_cb.checked?download("subtitles.srt",Sub.output.join("\n")):download("subtitles.ass",Sub.output.join("\n")))}function errors(){let e;for(let t=0;t<Sub.timeline.length;t++)""==Sub.timeline[t]&&(e="Time #"+(t+1)+" is empty!",e+=" </br>        (After: "+Sub.timeline[t-1]+")",messages(e,"e")),""==Sub.text[t]&&(e="Text #"+(t+1)+" is empty!",e+=" </br> (After: "+Sub.text[t-1]+")",messages(e,"e")),Sub.timeline[t]=Sub.timeline[t].replace(/\s+/g,"")}function countRows(){let e=text_box.value.lineCount(),t=timeline_box.value.lineCount(),n=names_box.value.lineCount(),s=document.querySelectorAll(".countRows");rowsOf=[t,n,e],t!=e?messages("number of timeline and text strings doesn't match","e"):n==t&&n==e||!document.getElementById("names_cb").checked||messages("number of names strings doesn't match","w");for(let e=0;e<s.length;e++)s[e].innerHTML=rowsOf[e]}function logInput(){const e=Sub.text,t=Sub.timeline,n=Sub.names,s=Sub.delay,u=Sub.shift,o=Sub.startsFrom;sLog([{text:e},{timeline:t},{names:n}],"t"),sLog([{delay:s},{shift:u},{starts_from:o}],"t")}function download(e,t){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}String.prototype.lines=function(){return this.split(/\r*\n/)},String.prototype.lineCount=function(){return this.lines().length};